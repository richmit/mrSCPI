<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class SCPIrcFile - mrSCPI</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
  var index_rel_prefix = "./";
</script>

<script src="./js/navigation.js" defer></script>
<script src="./js/search.js" defer></script>
<script src="./js/search_index.js" defer></script>
<script src="./js/searcher.js" defer></script>
<script src="./js/darkfish.js" defer></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#class-SCPIrcFile-label-Introduction">Introduction</a>
    <li><a href="#class-SCPIrcFile-label-RC+File+Content">RC File Content</a>
    <li><a href="#class-SCPIrcFile-label-Nickname">Nickname</a>
    <li><a href="#class-SCPIrcFile-label-Network">Network</a>
    <li><a href="#class-SCPIrcFile-label-Use">Use</a>
  </ul>
</div>


  <div id="class-metadata">
    
    
<div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  <p class="link">Object
</div>

    
<div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
    <li><span class="include">Singleton</span>
  </ul>
</div>

    
    
<!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    <li ><a href="#method-c-new">::new</a>
    <li ><a href="#method-i-lookupNetwork">#lookupNetwork</a>
    <li ><a href="#method-i-lookupURLnickname">#lookupURLnickname</a>
    <li ><a href="#method-i-urlParser">#urlParser</a>
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-SCPIrcFile">
  <h1 id="class-SCPIrcFile" class="class">
    class SCPIrcFile
  </h1>

  <section class="description">
    
<h1 id="class-SCPIrcFile-label-Introduction">Introduction<span><a href="#class-SCPIrcFile-label-Introduction">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p><a href="SCPIrcFile.html"><code>SCPIrcFile</code></a> provides access to data housed in the mrSCPI RC file found at <code>$HOME/.mrSCPIrc</code> or at <code>$MRSCPIRC</code>.</p>

<h1 id="class-SCPIrcFile-label-RC+File+Content">RC File Content<span><a href="#class-SCPIrcFile-label-RC+File+Content">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>The file has (for now) two kinds of lines: <a href="SCPIrcFile.html#class-SCPIrcFile-label-Nickname">Nickname at <code>SCPIrcFile</code></a> &amp; <a href="SCPIrcFile.html#class-SCPIrcFile-label-Network">Network at <code>SCPIrcFile</code></a>.</p>

<h2 id="class-SCPIrcFile-label-Nickname">Nickname<span><a href="#class-SCPIrcFile-label-Nickname">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Nickname lines look like this:</p>

<pre>&lt;space_separated_list_of_nicknames&gt; =&gt; &lt;space_separated_list_of_network_annotated_urls&gt;</pre>

<p>The components are as follows:</p>
<ul><li><dl class="rdoc-list note-list"><dt><code>nickname</code>
<dd>
<p>Is a sequence of non-whitespace characters.  It may not contain <code>@</code>, <code>:</code>, or <code>/</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt><code>network_annotated_url</code>
<dd>
<p>Is of the form: <code>[network_name]@[net_protocol://]ip_address[:net_port]</code></p>
</dd></dl>
<ul><li><dl class="rdoc-list note-list"><dt><code>net_protocol</code>
<dd>
<p>Is one of <code>raw</code>, <code>soip</code>, <code>lxi</code>, or <code>t3k</code>.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt><code>net_port</code>
<dd>
<p>Is an integer.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt><code>ip_address</code>
<dd>
<p>May be an IP address or host DNS name.</p>
</dd></dl>
</li></ul>
</li></ul>

<h2 id="class-SCPIrcFile-label-Network">Network<span><a href="#class-SCPIrcFile-label-Network">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Network lines look like this:</p>

<pre>&lt;network_name&gt; &lt;space_separated_list_of_networks&gt;</pre>

<p>The components are as follows:</p>
<ul><li><dl class="rdoc-list note-list"><dt><code>network_name</code>
<dd>
<p>Is a sequence of non-whitespace characters.  It may not contain <code>@</code>, <code>:</code>, or <code>/</code>.</p>
</dd></dl>
</li></ul>

<h2 id="class-SCPIrcFile-label-Use">Use<span><a href="#class-SCPIrcFile-label-Use">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>In general <a href="SCPIrcFile.html"><code>SCPIrcFile</code></a> provides three services:</p>
<ul><li><dl class="rdoc-list note-list"><dt><a href="SCPIrcFile.html#method-i-urlParser"><code>urlParser</code></a>
<dd>
<p>Parse URLs, expanding nicknames as required.</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt><a href="SCPIrcFile.html#method-i-lookupURLnickname"><code>lookupURLnickname</code></a>
<dd>
<p>Lookup nickname in the RC file</p>
</dd></dl>
</li><li><dl class="rdoc-list note-list"><dt><a href="SCPIrcFile.html#method-i-lookupNetwork"><code>lookupNetwork</code></a>
<dd>
<p>Lookup networks in the RC file (given an IP address or automatically querying the current host’s IP)</p>
</dd></dl>
</li></ul>

<p>When nickname strings provided as arguments have no explicitly given network, then the network lines in the RC file are used to try and find one.  The host IP addresses are tested for inclusion in each domain listed in the RC file – in the order they are found in the file.  If the host has an IP address that is included in one of the networks, then that network name is used for the nickname lookup.  If nothing is found, then the network name is left as the empty string – so it will match a <code>network_annotated_url</code> with an empty network.</p>

  </section>

  <section id="5Buntitled-5D" class="documentation-section">





     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

      <div id="method-c-new" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File src/mrSCPI.rb, line 1234</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span> ()
  <span class="ruby-ivar">@rcNetworks</span>     = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@rcURLnicknames</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;HOME&#39;</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;MRSCPIRC&#39;</span>] <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">configFileName</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;MRSCPIRC&#39;</span>] <span class="ruby-operator">||</span> (<span class="ruby-constant">ENV</span>[<span class="ruby-string">&#39;HOME&#39;</span>] <span class="ruby-operator">+</span> <span class="ruby-string">&#39;/.mrSCPIrc&#39;</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-constant">FileTest</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">configFileName</span>) <span class="ruby-keyword">then</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">configFileFD</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">configFileName</span>, <span class="ruby-string">&quot;r&quot;</span>)
      <span class="ruby-keyword">rescue</span>
        <span class="ruby-constant">PrintyPrintyBangBang</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">logPrinter</span>(<span class="ruby-value">1</span>, <span class="ruby-string">&quot;ERROR: Failed to open RC file!&quot;</span>, <span class="ruby-keyword">self</span>, <span class="ruby-value">83</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span>(<span class="ruby-identifier">configFileFD</span>) <span class="ruby-keyword">then</span>
        <span class="ruby-ivar">@rcNetworks</span>     = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
        <span class="ruby-ivar">@rcURLnicknames</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>
        <span class="ruby-identifier">configFileFD</span>.<span class="ruby-identifier">each_line</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">chomp</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/#.*/</span>, <span class="ruby-string">&#39;&#39;</span>).<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/  +/</span>, <span class="ruby-string">&#39; &#39;</span>)
          <span class="ruby-identifier">configLineMatchData</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp">/^([a-zA-Z]+) (.+)$/</span>)
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">configLineMatchData</span> <span class="ruby-keyword">then</span>
            <span class="ruby-keyword">if</span> <span class="ruby-identifier">configLineMatchData</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;nickname&#39;</span> <span class="ruby-keyword">then</span>
              <span class="ruby-keyword">if</span> <span class="ruby-identifier">configLineMatchData</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">match?</span>(<span class="ruby-string">&#39;=&gt;&#39;</span>) <span class="ruby-keyword">then</span>
                (<span class="ruby-identifier">aliases</span>, <span class="ruby-identifier">urls</span>) = <span class="ruby-identifier">configLineMatchData</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">split</span>(<span class="ruby-string">&#39;=&gt;&#39;</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp">/ +/</span>) }
                <span class="ruby-identifier">aliases</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span>
                  <span class="ruby-ivar">@rcURLnicknames</span>[<span class="ruby-identifier">a</span>] = (<span class="ruby-identifier">urls</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> ( <span class="ruby-identifier">e</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-string">&#39;@&#39;</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">e</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;@#{e}&quot;</span> ).<span class="ruby-identifier">split</span>(<span class="ruby-string">&#39;@&#39;</span>) }).<span class="ruby-identifier">to_h</span>
                <span class="ruby-keyword">end</span>
              <span class="ruby-keyword">else</span>
                <span class="ruby-constant">PrintyPrintyBangBang</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">logPrinter</span>(<span class="ruby-value">2</span>, <span class="ruby-node">&quot;WARNING: RC file: Syntax error in nickname: #{line.inspect}&quot;</span>, <span class="ruby-keyword">self</span>)
              <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">configLineMatchData</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;network&#39;</span> <span class="ruby-keyword">then</span>
              <span class="ruby-identifier">netSpecs</span> = <span class="ruby-identifier">configLineMatchData</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">split</span>(<span class="ruby-regexp">/ +/</span>)
              <span class="ruby-identifier">netName</span>  = <span class="ruby-identifier">netSpecs</span>.<span class="ruby-identifier">shift</span>
              <span class="ruby-identifier">netSpecs</span> = <span class="ruby-identifier">netSpecs</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-constant">IPAddr</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">x</span>) }
              <span class="ruby-ivar">@rcNetworks</span>.<span class="ruby-identifier">push</span>([<span class="ruby-identifier">netName</span>, <span class="ruby-identifier">netSpecs</span>])
            <span class="ruby-keyword">else</span>
              <span class="ruby-constant">PrintyPrintyBangBang</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">logPrinter</span>(<span class="ruby-value">2</span>, <span class="ruby-node">&quot;WARNING: RC file: Unrecognized configuration statement: #{line.inspect}&quot;</span>, <span class="ruby-keyword">self</span>)
            <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">else</span>
            <span class="ruby-keyword">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">!=</span> <span class="ruby-string">&#39;&#39;</span> <span class="ruby-keyword">then</span>
              <span class="ruby-constant">PrintyPrintyBangBang</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">logPrinter</span>(<span class="ruby-value">2</span>, <span class="ruby-node">&quot;WARNING: RC file: Syntax error: #{line.inspect}&quot;</span>, <span class="ruby-keyword">self</span>)
            <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">configFileFD</span>.<span class="ruby-identifier">close</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-constant">PrintyPrintyBangBang</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">logPrinter</span>(<span class="ruby-value">2</span>, <span class="ruby-node">&quot;WARNING: RC file: Unable to open file: #{configFileName.inspect}&quot;</span>, <span class="ruby-keyword">self</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-constant">PrintyPrintyBangBang</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">logPrinter</span>(<span class="ruby-value">2</span>, <span class="ruby-string">&quot;WARNING: RC file missing.&quot;</span>, <span class="ruby-keyword">self</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">PrintyPrintyBangBang</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">logPrinter</span>(<span class="ruby-value">2</span>, <span class="ruby-string">&quot;WARNING: Can&#39;t load RC file (no HOME or MRSCPIRC variable).&quot;</span>, <span class="ruby-keyword">self</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

    </section>

     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

      <div id="method-i-lookupNetwork" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">lookupNetwork</span><span
            class="method-args">(ip_address=nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Find a network in the RC file that contains the given <code>ip_address</code>. If <code>ip_address</code> is <code>nil</code>, then the IP addresses of the current host are used.  If nothing is found, then an empty string is returned.</p>

          <div class="method-source-code" id="lookupNetwork-source">
            <pre><span class="ruby-comment"># File src/mrSCPI.rb, line 1328</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">lookupNetwork</span> (<span class="ruby-identifier">ip_address</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span>(<span class="ruby-ivar">@rcNetworks</span>.<span class="ruby-identifier">empty?</span>) <span class="ruby-keyword">then</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">ip_address</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">ip_address</span> = <span class="ruby-constant">Socket</span>.<span class="ruby-identifier">ip_address_list</span>.<span class="ruby-identifier">select</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:ipv4?</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-constant">IPAddr</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">x</span>.<span class="ruby-identifier">ip_address</span>) }
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">dMatch</span> = <span class="ruby-ivar">@rcNetworks</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">network</span>, <span class="ruby-identifier">nets</span><span class="ruby-operator">|</span> <span class="ruby-identifier">nets</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ip_address</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span> <span class="ruby-identifier">n</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">a</span>) } } }
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">dMatch</span> <span class="ruby-keyword">then</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">dMatch</span>.<span class="ruby-identifier">first</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-string">&#39;&#39;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-lookupURLnickname" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">lookupURLnickname</span><span
            class="method-args">(nicknameString)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Helper function to lookup instrument nicknames to URLs.  The <code>nicknameString</code> can take one of three forms:</p>
<ul><li>
<p><code>network@nickname</code></p>
</li><li>
<p><code>@nickname</code></p>
</li><li>
<p><code>nickname</code></p>
</li></ul>

<p><code>SCPIsession</code> only uses the first two forms. Returns an <code>nil</code> if the lookup failed.  Otherwise returns the match as a string.</p>

          <div class="method-source-code" id="lookupURLnickname-source">
            <pre><span class="ruby-comment"># File src/mrSCPI.rb, line 1294</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">lookupURLnickname</span> (<span class="ruby-identifier">nicknameString</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rcURLnicknames</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">nicknameMatch</span> = <span class="ruby-identifier">nicknameString</span>.<span class="ruby-identifier">match</span>(<span class="ruby-constant">SCPIregexLibrary</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">a</span>(<span class="ruby-value">:mrs_nickname</span>))
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">nicknameMatch</span> <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">inNetwork</span>  = (<span class="ruby-identifier">nicknameMatch</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-string">&#39;&#39;</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">nicknameMatch</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">downcase</span>)
      <span class="ruby-identifier">inName</span>     = <span class="ruby-identifier">nicknameMatch</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">downcase</span>

      <span class="ruby-comment"># Now figure out what network we should use</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">inNetwork</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;&#39;</span> <span class="ruby-keyword">then</span>
        <span class="ruby-identifier">inNetwork</span> = <span class="ruby-identifier">lookupNetwork</span>() <span class="ruby-operator">||</span> <span class="ruby-identifier">inNetwork</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-comment"># Now we look for our nickname</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rcURLnicknames</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword">then</span>
        <span class="ruby-constant">PrintyPrintyBangBang</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">logPrinter</span>(<span class="ruby-value">1</span>, <span class="ruby-string">&quot;ERROR: No nicknams loaded.&quot;</span>, <span class="ruby-keyword">self</span>, <span class="ruby-value">78</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@rcURLnicknames</span>.<span class="ruby-identifier">member?</span>(<span class="ruby-identifier">inName</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@rcURLnicknames</span>[<span class="ruby-identifier">inName</span>].<span class="ruby-identifier">member?</span>(<span class="ruby-identifier">inNetwork</span>) <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">return</span> <span class="ruby-ivar">@rcURLnicknames</span>[<span class="ruby-identifier">inName</span>][<span class="ruby-identifier">inNetwork</span>]
      <span class="ruby-keyword">else</span>
        <span class="ruby-constant">PrintyPrintyBangBang</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">logPrinter</span>(<span class="ruby-value">1</span>, <span class="ruby-string">&quot;ERROR: Nickname was not found in the RC file&quot;</span>, <span class="ruby-keyword">self</span>, <span class="ruby-value">79</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-constant">PrintyPrintyBangBang</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">logPrinter</span>(<span class="ruby-value">1</span>, <span class="ruby-string">&quot;ERROR: Invalid nickname string&quot;</span>, <span class="ruby-keyword">self</span>, <span class="ruby-value">80</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">PrintyPrintyBangBang</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">logPrinter</span>(<span class="ruby-value">1</span>, <span class="ruby-string">&quot;ERROR: RC config file errors&quot;</span>, <span class="ruby-keyword">self</span>, <span class="ruby-value">81</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-urlParser" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">urlParser</span><span
            class="method-args">(urlString)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Parse URLs.  Lookup nicknames if requried.  Return nil if urlString is invalid and a hash otherwise</p>

          <div class="method-source-code" id="urlParser-source">
            <pre><span class="ruby-comment"># File src/mrSCPI.rb, line 1343</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">urlParser</span> (<span class="ruby-identifier">urlString</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">urlString</span>.<span class="ruby-identifier">match?</span>(<span class="ruby-string">&#39;@&#39;</span>) <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">urlString</span> = <span class="ruby-constant">SCPIrcFile</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">lookupURLnickname</span>(<span class="ruby-identifier">urlString</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">urlString</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword">then</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">urlMatch</span> = <span class="ruby-identifier">urlString</span>.<span class="ruby-identifier">match</span>(<span class="ruby-constant">SCPIregexLibrary</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">a</span>(<span class="ruby-value">:mrs_url</span>))
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">urlMatch</span> <span class="ruby-keyword">then</span>
    <span class="ruby-keyword">return</span> { <span class="ruby-value">:url</span>          <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">urlString</span>,
             <span class="ruby-value">:net_protocol</span> <span class="ruby-operator">=&gt;</span> (<span class="ruby-identifier">urlMatch</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">urlMatch</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">to_sym</span>),
             <span class="ruby-value">:ip_address</span>   <span class="ruby-operator">=&gt;</span> <span class="ruby-identifier">urlMatch</span>[<span class="ruby-value">2</span>],
             <span class="ruby-value">:net_port</span>     <span class="ruby-operator">=&gt;</span> (<span class="ruby-identifier">urlMatch</span>[<span class="ruby-value">3</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">urlMatch</span>[<span class="ruby-value">3</span>].<span class="ruby-identifier">to_i</span>) }
  <span class="ruby-keyword">else</span>
    <span class="ruby-constant">PrintyPrintyBangBang</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">logPrinter</span>(<span class="ruby-value">1</span>, <span class="ruby-node">&quot;ERROR: :url was malformed: #{urlString.inspect}&quot;</span>, <span class="ruby-keyword">self</span>, <span class="ruby-value">70</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

    </section>

  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.4.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

